(this["webpackJsonptransfer-map"]=this["webpackJsonptransfer-map"]||[]).push([[0],{443:function(e,t,a){e.exports=a(561)},448:function(e,t,a){},558:function(e,t,a){},561:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),l=a.n(r),i=(a(448),a(48)),s=a(49),c=a(51),p=a(50),u=a(426),d=a(134),h=a(109),m=a(408),g=a(190),f={csvUrl:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2Fmockup.csv?alt=media&token=82d1e6d6-e634-492d-a7a7-32223735c25f",mapOptions:{active_color:"#dbabac",passive_color:"#DDD",focus_color:"#bd3d3f",label_text_style:{fill:"#ffffff",fontSize:"12px",fontWeight:"900",letterSpacing:"-0.26px"},capitals:"https://gist.githubusercontent.com/erdem/8c7d26765831d0f9a8c62f02782ae00d/raw/248037cd701af0a4957cce340dabb0fd04e38f4c/countries.json"},columns:{transactionDateRange:{title:"Transaction date range",field:"transactionDate",hidden:!1,searchable:!1,sorting:!1,grouping:!0,filtering:!0,type:"date_range",defaultFilter:"",lookup:"",filterPlaceholder:"Transaction date range",customFilterAndSearch:function(e,t){if(null==e.dateRange)return!0;var a=new Date(t.transactionDate);return a>=e.dateRange[0]&&a<=e.dateRange[1]}},paidBy:{title:"Paid by",field:"paidBy",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"Payer...",width:66},paidTo:{title:"Paid to",field:"paidTo",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"Recipient...",width:66},numberRange:{title:"Amount range",field:"amount",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,type:"number_range",defaultFilter:"",lookup:"",filterPlaceholder:"",width:66,customFilterAndSearch:function(e,t){return console.log("greater: "+e.greaterThan),console.log("less: "+e.lessThan),console.log("rowData: "+t.amount),null!=e[0]?t[0]==e[0]:null!=e.greaterThan&&null!=e.lessThan?e.greaterThan<=parseInt(t.amount)&&e.lessThan>=parseInt(t.amount):null!=e.greaterThan&&null==e.lessThan?e.greaterThan<=parseInt(t.amount):null!=e.greaterThan||null==e.lessThan||e.lessThan>=parseInt(t.amount)}},amount:{title:"Amount",field:"amount",hidden:!0,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"currency",width:66},fromCountry:{title:"From Country",field:"fromCountry",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"From country",width:66},country:{title:"Country",field:"country",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"To country...",width:120},purpose:{title:"Purpose",field:"purpose",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",width:66},type:{title:"Type",field:"type",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",width:66},bankSender:{title:"Bank sender",field:"bankSender",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"Bank...",width:120},confidence:{title:"Confidence",field:"confidence",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!1,lookup:{confirmed:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2FConfirmed.svg?alt=media&token=60873b2f-26ed-4c14-b210-8f5467709e1c"},defaultFilter:"",type:"image",cellStyle:{textAlign:"center"},width:66},proof:{title:"Proof",field:"proof",hidden:!1,searchable:!0,sorting:!0,grouping:!0,filtering:!1,lookup:{internal:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2FInternal.svg?alt=media&token=ea2ac9bf-5026-45ff-8074-0e5bd08b5e8a",bank:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2FBank.svg?alt=media&token=cf2d58c9-c18e-48e1-9033-8739f85a66eb",electronic:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2FElectronic.svg?alt=media&token=0a7b3d35-71a8-4f46-85a0-9bf681e7c2b0",customs:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-table%2FCustoms.svg?alt=media&token=71ecfae4-1c9e-459d-82a3-e8da707dbb9d"},defaultFilter:"",type:"image",width:66,cellStyle:{textAlign:"center"}},story:{title:"Story",field:"story",hidden:!0,searchable:!0,sorting:!0,grouping:!0,filtering:!0,defaultFilter:"",lookup:"",type:"",filterPlaceholder:"Story...",width:66}},table:{search:!0,sorting:!0,filtering:!0,grouping:!1,paging:!0,pageSize:20,textBody:"Explore the dataset of transactions below:",hideFilterIcons:!0,showTitle:!1,pageSizeOptions:[],paginationType:"stepped",padding:"dense",searchFieldAlignment:"left",searchFieldVariant:"standard",loadingType:"overlay",draggable:!1,searchFieldStyle:{width:"100%",height:"35px",boxShadow:"inset 1px 2px 4px rgba(0, 0, 0, 0.35)",border:"1px solid #979797",backgroundColor:"#ffffff"},headerStyle:{fontWeight:700,lineHeight:"14px"},rowStyle:{height:"37px"}}},b=a(451).Set,y=(m.a,Object(u.a)(g,["geoPath"])),E=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).config={},e.countries=b([]),e.pairs=[],e.capitals={},e.dataScaler=null,e.state={ready:!1,conf:{},data:[],visibleCountries:b([]),visiblePairs:[],focusCountry:null},e.makeProjection=function(e){var t=e.projectionConfig,a=void 0===t?{}:t,n=e.projection,o=void 0===n?"geoEqualEarth":n,r=e.width,l=void 0===r?800:r,i=e.height,s=void 0===i?600:i;if("function"===typeof o)return o;var c=y[o]().translate([l/2,s/2]);return[c.center?"center":null,c.rotate?"rotate":null,c.scale?"scale":null,c.parallels?"parallels":null].forEach((function(e){e&&(c=c[e](a[e]||c[e]()))})),c},e.extractCountries=function(t){t.forEach((function(t){e.countries=e.countries.add(t.from_country),e.countries=e.countries.add(t.to_country)}))},e.nestPairs=function(e){return Object(h.d)().key((function(e){return e.from_country})).key((function(e){return e.to_country})).rollup((function(e){return{count:e.length,total:Object(h.f)(e,(function(e){return e.amount}))}})).entries(e)},e.countryClickHandler=function(t){console.log("country click"),e.countries.has(t)&&(e.setState({focusCountry:t}),e.props.handleCountryClick(t))},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){e.resetMap!==this.props.resetMap&&this.props.resetMap&&this.setState({focusCountry:null})}},{key:"componentDidMount",value:function(){var e=this;Object(h.c)(f.mapOptions.capitals,(function(e){return e})).then((function(t){var a=e.props.data.map((function(e){return{from_country:e[f.columns.fromCountry.field],to_country:e[f.columns.country.field],amount:e[f.columns.amount.field]}}));e.extractCountries(a),e.pairs=e.nestPairs(a);var n=[];e.pairs.forEach((function(e){return e.values.forEach((function(e){n.push(e.value.total)}))})),console.log(e.pairs),e.dataScaler=Object(h.e)().domain(Object(h.b)(n)).range([.5,5]),e.capitals=Object(h.d)().key((function(e){return e.name})).map(t),console.log(e.capitals),e.setState({data:a,ready:!0,visibleCountries:e.countries,visiblePairs:e.pairs})}))}},{key:"render",value:function(){var e=this,t=null;if(this.state.ready){var a=y.geoEqualEarth().rotate([-40,0]).scale(180);t=o.a.createElement("div",{style:{borderTop:"2px solid #931e1d",paddingTop:"25px"}},o.a.createElement(d.ComposableMap,{projection:a,onClick:this.handleCountryClick},o.a.createElement(d.Geographies,{geography:"https://firebasestorage.googleapis.com/v0/b/newagent-b0720.appspot.com/o/transfer-map%2Fcountries-110m.json?alt=media&token=94f12c4b-592b-46d9-8761-a20a94c09b20"},(function(t){return t.geographies.map((function(t){var a=e.state.visibleCountries.has(t.properties.name),n=e.state.focusCountry===t.properties.name,r=f.mapOptions.passive_color;return n?r=f.mapOptions.focus_color:a&&(r=f.mapOptions.active_color),o.a.createElement(d.Geography,{key:t.rsmKey,geography:t,onClick:function(){return e.countryClickHandler(t.properties.name)},stroke:"#FFF",fill:r,style:{default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}}})}))})),this.state.visiblePairs.map((function(t){return t.values.map((function(t){var a=e.capitals.get(t.key)[0].latlng.slice().reverse()[0]-2,n=e.capitals.get(t.key)[0].latlng.slice().reverse()[1]+.5;return o.a.createElement(d.Marker,{coordinates:[a,n]},o.a.createElement("g",{transform:"translate(-2, -3)"},o.a.createElement("g",null,o.a.createElement("image",{width:"17",height:"11",transform:"translate(-1)",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAALCAYAAACZIGYHAAABAklEQVQoU63SOUtEQRAE4G+9bxA8MBHFTM0EM03M/MGGBpoZmKiZgZiIGggeKK4Xtcw8HrKJYEPTPQNVXV0zHf8QnT4cuRtoZc7fJT/xVfoG2iZJP4IJTJYcxxA+8IqXVnYrWSVJDWABq1gu/QyGEcAjbnGNq9K/haiSZFoItrCDdcwXNYNlhWfc4QLHOMV9VFaSTMv0PexjE7NlvfgTH97xgDMc4LCo6raVLGIbu9jAXPEnSmJoPMnkcxzhpChrlIQshi5hDStlnemWsXWd+HGJm0LceJLnCtFo8SHgKYyhKomJIXoqNevl6XvA35G7AONFav0n9Y+k9sA1+pH8+Q//AP87QAx5oVJdAAAAAElFTkSuQmCC"})),o.a.createElement("g",null,o.a.createElement("path",{fill:"#fff",d:"M12.122 4.664c0 1.035-2.12 1.874-4.735 1.874-2.616 0-4.737-.839-4.737-1.874 0-1.035 2.121-1.874 4.737-1.874 2.615 0 4.735.839 4.735 1.874"})),o.a.createElement("g",null,o.a.createElement("path",{fill:"none",stroke:"#666","stroke-miterlimit":"20","stroke-width":".25",d:"M12.122 4.664c0 1.035-2.12 1.874-4.735 1.874-2.616 0-4.737-.839-4.737-1.874 0-1.035 2.121-1.874 4.737-1.874 2.615 0 4.735.839 4.735 1.874z"}))))}))})),this.state.visiblePairs.map((function(t){return t.values.map((function(n){var r=e.capitals.get(t.key)[0].latlng.slice().reverse(),l=e.capitals.get(n.key)[0].latlng.slice().reverse(),i=a(r),s=a(l),c=s[0]-i[0],p=s[1]-i[1],u={stroke:"#931e1d",strokeWidth:e.dataScaler(n.value.total),strokeLinecap:"butt",markerStart:"url(#triangle)"};return o.a.createElement(d.Annotation,{subject:r,dx:c,dy:p,connectorProps:u},o.a.createElement("defs",null,o.a.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"3",refY:"5",markerUnits:"strokeWidth",markerWidth:"2.5",markerHeight:"5",orient:"auto"},o.a.createElement("path",{d:"M 10 0 L 10 10 L 0 5 z",fill:"#931e1d"}))))}))})),this.state.visiblePairs.map((function(t){return t.values.map((function(t){return o.a.createElement(d.Marker,{coordinates:e.capitals.get(t.key)[0].latlng.slice().reverse()},o.a.createElement("defs",null,o.a.createElement("mask",{id:"k4zgb",width:"2",height:"2",x:"-1",y:"-1"},o.a.createElement("path",{fill:"#fff",d:"M2 1h104v39H2z"}),o.a.createElement("path",{d:"M2 1h104v34H59l-5 5-5-5H2z"})),o.a.createElement("filter",{id:"k4zga",width:"128",height:"64",x:"-10",y:"-11",filterUnits:"userSpaceOnUse"},o.a.createElement("feOffset",{dy:"1",in:"SourceGraphic",result:"FeOffset1023Out"}),o.a.createElement("feGaussianBlur",{in:"FeOffset1023Out",result:"FeGaussianBlur1024Out",stdDeviation:"0.8 0.8"})),o.a.createElement("clipPath",{id:"k4zgc"},o.a.createElement("path",{fill:"#fff",d:"M2 1h104v34H59l-5 5-5-5H2z"}))),o.a.createElement("g",{transform:"translate(-54, -45)"},o.a.createElement("g",null,o.a.createElement("g",{filter:"url(#k4zga)"},o.a.createElement("path",{fill:"none",d:"M2 1h104v34H59l-5 5-5-5H2z",mask:'url("#k4zgb")'}),o.a.createElement("path",{"fill-opacity":".35",d:"M2 1h104v34H59l-5 5-5-5H2z"})),o.a.createElement("path",{fill:"#931e1d",d:"M2 1h104v34H59l-5 5-5-5H2z"}),o.a.createElement("path",{fill:"none",stroke:"#fff","stroke-miterlimit":"20","stroke-width":"2",d:"M2 1h104v34H59l-5 5-5-5H2z","clip-path":'url("#k4zgc")'}))),o.a.createElement("text",{textAnchor:"middle",y:-30,style:f.mapOptions.label_text_style},"$"+t.value.total.toLocaleString("en-US")+"\n"),o.a.createElement("text",{textAnchor:"middle",y:-15,style:f.mapOptions.label_text_style},t.value.count+" transactions"))}))}))))}return o.a.createElement("div",null,t)}}]),a}(n.Component),v=a(18),k=a(416),C=a.n(k),w=a(249),D=a(72),O=a(317),P=a.n(O),x=a(315),S=a(383),F=a(389),A=a(303),R=a(312),T=a(244),j=a(304),z=a(384),M=a(409),B=a(401),L=a(305),H=a(385),N=a(234),V=a(294),I=a(296),W=a(295),G=a(29),_=a(423),U=a.n(_),J={PaperProps:{style:{maxHeight:224,width:250}}},Q=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getLocalizationData=function(){return Object(v.a)(Object(v.a)({},a.defaultProps.localization),e.props.localization)},e.getLocalizedFilterPlaceHolder=function(t){return t.filterPlaceholder||e.getLocalizationData().filterPlaceHolder||""},e.renderLookupFilter=function(t){return n.createElement(A.a,{style:{width:"100%"}},n.createElement(j.a,{htmlFor:"select-multiple-checkbox",style:{marginTop:-16}},e.getLocalizedFilterPlaceHolder(t)),n.createElement(R.a,{multiple:!0,value:t.tableData.filterValue||[],onChange:function(a){e.props.onFilterChanged(t.tableData.id,a.target.value)},input:n.createElement(T.a,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.map((function(e){return t.lookup[e]})).join(", ")},MenuProps:J,style:{marginTop:0}},Object.keys(t.lookup).map((function(e){return n.createElement(z.a,{key:e,value:e},n.createElement(M.a,{checked:!!t.tableData.filterValue&&t.tableData.filterValue.indexOf(e.toString())>-1}),n.createElement(B.a,{primary:t.lookup[e]}))}))))},e.renderFilterComponent=function(t){return n.createElement(t.filterComponent,{columnDef:t,onFilterChanged:e.props.onFilterChanged})},e.renderBooleanFilter=function(t){return n.createElement(M.a,{indeterminate:void 0===t.tableData.filterValue,checked:"checked"===t.tableData.filterValue,onChange:function(){var a;void 0===t.tableData.filterValue?a="checked":"checked"===t.tableData.filterValue&&(a="unchecked"),e.props.onFilterChanged(t.tableData.id,a)}})},e.renderDefaultFilter=function(t){var a=e.getLocalizationData(),o=e.props.icons.Filter;return n.createElement(w.a,{style:"numeric"===t.type?{float:"right"}:{},type:"numeric"===t.type?"number":"search",value:t.tableData.filterValue||"",placeholder:e.getLocalizedFilterPlaceHolder(t),onChange:function(a){e.props.onFilterChanged(t.tableData.id,a.target.value)},inputProps:{"aria-label":"filter data by ".concat(t.title)},InputProps:e.props.hideFilterIcons||t.hideFilterIcon?void 0:{startAdornment:n.createElement(L.a,{position:"start"},n.createElement(H.a,{title:a.filterTooltip},n.createElement(o,null)))}})},e.renderDateTypeFilter=function(t){var a={value:t.tableData.filterValue||null,onChange:function(a){return e.props.onFilterChanged(t.tableData.id,a)},placeholder:e.getLocalizedFilterPlaceHolder(t),clearable:!0},o=null;return"date"===t.type?o=n.createElement(V.a,a):"datetime"===t.type?o=n.createElement(I.a,a):"time"===t.type&&(o=n.createElement(W.b,a)),n.createElement(G.a,{utils:N.default,locale:e.props.localization.dateTimePickerLocalization},o)},e.renderDateRangeTypeFilter=function(t){return n.createElement(U.a,{onChange:function(a){console.log("on change");var n=Object(v.a)({},t.tableData.filterValue);console.log(n),n.dateRange=a,e.props.dateRangeChange(a),e.props.onFilterChanged(t.tableData.id,n)},value:e.props.dateRange})},e.renderAmountRangeTypeFilter=function(t){return n.createElement(n.Fragment,null,n.createElement(w.a,{style:"numeric"===t.type?{float:"right"}:{},type:"numeric"===t.type?"number":"search",value:x.get(t,["tableData","filterValue","greaterThan"])||"",placeholder:t.filterPlaceholder||"",onChange:function(a){console.log("on change");var n=Object(v.a)({},t.tableData.filterValue);console.log(n),n.greaterThan=a.target.value,e.props.onFilterChanged(t.tableData.id,n)},InputProps:t.hideFilterIcon?void 0:{startAdornment:n.createElement(L.a,{position:"start"},n.createElement(H.a,{title:"Filter greater than"},n.createElement("div",{style:{display:"flex"}},n.createElement(P.a,null),n.createElement(D.a,null,">"))))}}),n.createElement(w.a,{style:"numeric"===t.type?{float:"right"}:{},type:"numeric"===t.type?"number":"search",value:x.get(t,["tableData","filterValue","lessThan"])||"",placeholder:t.filterPlaceholder||"",onChange:function(a){var n=Object(v.a)({},t.tableData.filterValue);n.lessThan=a.target.value,e.props.onFilterChanged(t.tableData.id,n)},InputProps:t.hideFilterIcon?void 0:{startAdornment:n.createElement(L.a,{position:"start"},n.createElement(H.a,{title:"Filter less than"},n.createElement("div",{style:{display:"flex"}},n.createElement(P.a,null),n.createElement(D.a,null,"<"))))}}))},e}return Object(s.a)(a,[{key:"getComponentForColumn",value:function(e){return!1===e.filtering?null:e.field||e.customFilterAndSearch?e.filterComponent?this.renderFilterComponent(e):e.lookup?this.renderLookupFilter(e):"boolean"===e.type?this.renderBooleanFilter(e):["date","datetime","time"].includes(e.type)?this.renderDateTypeFilter(e):"number_range"===e.type?this.renderAmountRangeTypeFilter(e):"date_range"===e.type?this.renderDateRangeTypeFilter(e):this.renderDefaultFilter(e):void 0}},{key:"render",value:function(){var e=this,t=this.props.columns.filter((function(e){return e.filtering&&!(e.tableData.groupOrder>-1)})).sort((function(e,t){return e.tableData.columnOrder-t.tableData.columnOrder})).map((function(t){return n.createElement(S.a,{key:t.tableData.id,style:Object(v.a)(Object(v.a)({},e.props.filterCellStyle),t.filterCellStyle)},e.getComponentForColumn(t))}));if(this.props.selection&&t.splice(0,0,n.createElement(S.a,{padding:"none",key:"key-selection-column"})),this.props.hasActions)if(-1===this.props.actionsColumnIndex)t.push(n.createElement(S.a,{key:"key-action-column"}));else{var a=0;this.props.selection&&(a=1),t.splice(this.props.actionsColumnIndex+a,0,n.createElement(S.a,{key:"key-action-column"}))}return this.props.hasDetailPanel&&t.splice(0,0,n.createElement(S.a,{padding:"none",key:"key-detail-panel-column"})),this.props.isTreeData>0&&t.splice(0,0,n.createElement(S.a,{padding:"none",key:"key-tree-data-filter"})),t.push(n.createElement(S.a,{key:"filters-reset-button"},n.createElement("button",{className:"filters-reset-button",onClick:this.props.resetFilters,style:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",cursor:"pointer",overflow:"hidden",outline:"none"}},n.createElement(D.a,{variant:"body2",style:{width:"96px"}},"Reset all filters")))),this.props.columns.filter((function(e){return e.tableData.groupOrder>-1})).forEach((function(e){t.splice(0,0,n.createElement(S.a,{padding:"checkbox",key:"key-group-filter"+e.tableData.id}))})),n.createElement(F.a,{style:{height:10}},t)}}]),a}(n.Component);Q.defaultProps={columns:[],selection:!1,hasActions:!1,localization:{filterTooltip:"Filter"},hideFilterIcons:!1};var K=Q,X=a(425),Y=a(388),Z=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={dataForSum:e.props.renderData},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){e.renderData!==this.props.renderData&&(this.props.getFilteredData(),this.props.getNumOfRowsOnPage(this.props.renderData.length))}},{key:"renderEmpty",value:function(e,t){var o="default"===this.props.options.padding?49:36,r=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization);if(this.props.options.showEmptyDataSourceMessage&&0===t.length){var l=0;return this.props.options.selection&&l++,this.props.actions&&this.props.actions.filter((function(e){return"row"===e.position||"function"===typeof e})).length>0&&l++,this.props.hasDetailPanel&&l++,this.props.isTreeData&&l++,n.createElement(F.a,{style:{height:o*(this.props.options.paging&&this.props.options.emptyRowsWhenPaging?this.props.pageSize:1)},key:"empty-0"},n.createElement(S.a,{style:{paddingTop:0,paddingBottom:0,textAlign:"center"},colSpan:this.props.columns.length+l,key:"empty-"},r.emptyDataSourceMessage))}if(this.props.options.emptyRowsWhenPaging)return n.createElement(n.Fragment,null,Object(X.a)(Array(e)).map((function(e,t){return n.createElement(F.a,{style:{height:o},key:"empty-"+t})})),e>0&&n.createElement(F.a,{style:{height:1},key:"empty-last1"}))}},{key:"renderUngroupedRows",value:function(e){var t=this;return e.map((function(e,o){return e.tableData.editing?n.createElement(t.props.components.EditRow,{columns:t.props.columns.filter((function(e){return!e.hidden})),components:t.props.components,data:e,icons:t.props.icons,localization:Object(v.a)(Object(v.a)(Object(v.a)({},a.defaultProps.localization.editRow),t.props.localization.editRow),{},{dateTimePickerLocalization:t.props.localization.dateTimePickerLocalization}),key:o,mode:e.tableData.editing,options:t.props.options,isTreeData:t.props.isTreeData,detailPanel:t.props.detailPanel,onEditingCanceled:t.props.onEditingCanceled,onEditingApproved:t.props.onEditingApproved,getFieldValue:t.props.getFieldValue}):n.createElement(t.props.components.Row,{components:t.props.components,icons:t.props.icons,data:e,index:o,key:"row-"+e.tableData.id,level:0,options:t.props.options,localization:Object(v.a)(Object(v.a)({},a.defaultProps.localization.editRow),t.props.localization.editRow),onRowSelected:t.props.onRowSelected,actions:t.props.actions,columns:t.props.columns,getFieldValue:t.props.getFieldValue,detailPanel:t.props.detailPanel,path:[o+t.props.pageSize*t.props.currentPage],onToggleDetailPanel:t.props.onToggleDetailPanel,onRowClick:t.props.onRowClick,isTreeData:t.props.isTreeData,onTreeExpandChanged:t.props.onTreeExpandChanged,onEditingCanceled:t.props.onEditingCanceled,onEditingApproved:t.props.onEditingApproved,hasAnyEditingRow:t.props.hasAnyEditingRow,treeDataMaxLevel:t.props.treeDataMaxLevel})}))}},{key:"renderGroupedRows",value:function(e,t){var o=this;return t.map((function(t,r){return n.createElement(o.props.components.GroupRow,{actions:o.props.actions,key:null==t.value?""+r:t.value,columns:o.props.columns,components:o.props.components,detailPanel:o.props.detailPanel,getFieldValue:o.props.getFieldValue,groupData:t,groups:e,icons:o.props.icons,level:0,path:[r+o.props.pageSize*o.props.currentPage],onGroupExpandChanged:o.props.onGroupExpandChanged,onRowSelected:o.props.onRowSelected,onRowClick:o.props.onRowClick,onEditingCanceled:o.props.onEditingCanceled,onEditingApproved:o.props.onEditingApproved,onToggleDetailPanel:o.props.onToggleDetailPanel,onTreeExpandChanged:o.props.onTreeExpandChanged,options:o.props.options,isTreeData:o.props.isTreeData,hasAnyEditingRow:o.props.hasAnyEditingRow,localization:Object(v.a)(Object(v.a)({},a.defaultProps.localization.editRow),o.props.localization.editRow)})}))}},{key:"render",value:function(){var e=this.props.renderData,t=this.props.columns.filter((function(e){return e.tableData.groupOrder>-1})).sort((function(e,t){return e.tableData.groupOrder-t.tableData.groupOrder})),o=0;return this.props.options.paging&&(o=this.props.pageSize-e.length),n.createElement(Y.a,null,this.props.options.filtering&&n.createElement(this.props.components.FilterRow,{columns:this.props.columns,icons:this.props.icons,hasActions:this.props.actions.filter((function(e){return"row"===e.position||"function"===typeof e})).length>0,actionsColumnIndex:this.props.options.actionsColumnIndex,onFilterChanged:this.props.onFilterChanged,selection:this.props.options.selection,localization:Object(v.a)(Object(v.a)(Object(v.a)({},a.defaultProps.localization.filterRow),this.props.localization.filterRow),{},{dateTimePickerLocalization:this.props.localization.dateTimePickerLocalization}),hasDetailPanel:!!this.props.detailPanel,isTreeData:this.props.isTreeData,filterCellStyle:this.props.options.filterCellStyle,hideFilterIcons:this.props.options.hideFilterIcons,resetFilters:this.props.resetFilters}),this.props.showAddRow&&"first"===this.props.options.addRowPosition&&n.createElement(this.props.components.EditRow,{columns:this.props.columns.filter((function(e){return!e.hidden})),data:this.props.initialFormData,components:this.props.components,icons:this.props.icons,key:"key-add-row",mode:"add",localization:Object(v.a)(Object(v.a)({},a.defaultProps.localization.editRow),this.props.localization.editRow),options:this.props.options,isTreeData:this.props.isTreeData,detailPanel:this.props.detailPanel,onEditingCanceled:this.props.onEditingCanceled,onEditingApproved:this.props.onEditingApproved,getFieldValue:this.props.getFieldValue}),t.length>0?this.renderGroupedRows(t,e):this.renderUngroupedRows(e),this.props.showAddRow&&"last"===this.props.options.addRowPosition&&n.createElement(this.props.components.EditRow,{columns:this.props.columns.filter((function(e){return!e.hidden})),data:this.props.initialFormData,components:this.props.components,icons:this.props.icons,key:"key-add-row",mode:"add",localization:Object(v.a)(Object(v.a)({},a.defaultProps.localization.editRow),this.props.localization.editRow),options:this.props.options,isTreeData:this.props.isTreeData,detailPanel:this.props.detailPanel,onEditingCanceled:this.props.onEditingCanceled,onEditingApproved:this.props.onEditingApproved,getFieldValue:this.props.getFieldValue}),this.renderEmpty(o,e))}}]),a}(n.Component);Z.defaultProps={actions:[],currentPage:0,pageSize:5,renderData:[],selection:!1,localization:{emptyDataSourceMessage:"No records to display",filterRow:{},editRow:{}}};var q=Z,$=a(235),ee=a(201),te=a(232),ae=a(302),ne=a(86),oe=a.n(ne),re=a(182),le=a(309),ie=a.n(le),se=a(310),ce=a(299),pe=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onSearchChange=function(e){n.props.dataManager.changeSearchText(e),n.setState({searchText:e},n.props.onSearchChanged(e))},n.defaultExportCsv=function(){var e=n.props.columns.filter((function(e){return!e.hidden&&e.field&&!1!==e.export})).sort((function(e,t){return e.tableData.columnOrder>t.tableData.columnOrder?1:-1})),t=(n.props.exportAllData?n.props.data:n.props.renderData).map((function(t){return e.map((function(e){return n.props.getFieldValue(t,e)}))}));new se.CsvBuilder((n.props.exportFileName||n.props.title||"data")+".csv").setDelimeter(n.props.exportDelimiter).setColumns(e.map((function(e){return e.title}))).addRows(t).exportFile()},n.exportCsv=function(){n.props.exportCsv?n.props.exportCsv(n.props.columns,n.props.data):n.defaultExportCsv(),n.setState({exportButtonAnchorEl:null})},n.state={columnsButtonAnchorEl:null,exportButtonAnchorEl:null,searchText:""},n}return Object(s.a)(a,[{key:"renderSearch",value:function(){var e=this,t=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization);return this.props.search?n.createElement(ce.a,{width:"1000%"},n.createElement(w.a,{autoFocus:this.props.searchAutoFocus,className:"left"===this.props.searchFieldAlignment&&!1===this.props.showTitle?null:this.props.classes.searchField,value:this.state.searchText,onChange:function(t){return e.onSearchChange(t.target.value)},placeholder:t.searchPlaceholder,variant:this.props.searchFieldVariant,fullWidth:!0,InputProps:{disableUnderline:!0,startAdornment:n.createElement(L.a,{position:"start"},n.createElement(H.a,{title:t.searchTooltip},n.createElement(this.props.icons.Search,{color:"inherit",fontSize:"small"}))),endAdornment:n.createElement(L.a,{position:"end"},n.createElement(ee.a,{disabled:!this.state.searchText,onClick:function(){return e.onSearchChange("")}},n.createElement(this.props.icons.ResetSearch,{color:"inherit",fontSize:"small"}))),style:this.props.searchFieldStyle,inputProps:{"aria-label":"Search"}}})):null}},{key:"renderDefaultActions",value:function(){var e=this,t=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization),o=this.props.classes;return n.createElement("div",null,this.props.columnsButton&&n.createElement("span",null,n.createElement(H.a,{title:t.showColumnsTitle},n.createElement(ee.a,{color:"inherit",onClick:function(t){return e.setState({columnsButtonAnchorEl:t.currentTarget})},"aria-label":t.showColumnsAriaLabel},n.createElement(this.props.icons.ViewColumn,null))),n.createElement(te.a,{anchorEl:this.state.columnsButtonAnchorEl,open:Boolean(this.state.columnsButtonAnchorEl),onClose:function(){return e.setState({columnsButtonAnchorEl:null})}},n.createElement(z.a,{key:"text",disabled:!0,style:{opacity:1,fontWeight:600,fontSize:12}},t.addRemoveColumns),this.props.columns.map((function(t){return n.createElement("li",{key:t.tableData.id},n.createElement(z.a,{className:o.formControlLabel,component:"label",htmlFor:"column-toggle-".concat(t.tableData.id),disabled:!1===t.removable},n.createElement(M.a,{checked:!t.hidden,id:"column-toggle-".concat(t.tableData.id),onChange:function(){return e.props.onColumnsChanged(t,!t.hidden)}}),n.createElement("span",null,t.title)))})))),this.props.exportButton&&n.createElement("span",null,n.createElement(H.a,{title:t.exportTitle},n.createElement(ee.a,{color:"inherit",onClick:function(t){return e.setState({exportButtonAnchorEl:t.currentTarget})},"aria-label":t.exportAriaLabel},n.createElement(this.props.icons.Export,null))),n.createElement(te.a,{anchorEl:this.state.exportButtonAnchorEl,open:Boolean(this.state.exportButtonAnchorEl),onClose:function(){return e.setState({exportButtonAnchorEl:null})}},n.createElement(z.a,{key:"export-csv",onClick:this.exportCsv},t.exportName))),n.createElement("span",null,n.createElement(this.props.components.Actions,{actions:this.props.actions&&this.props.actions.filter((function(e){return"toolbar"===e.position})),components:this.props.components})))}},{key:"renderSelectedActions",value:function(){return n.createElement(n.Fragment,null,n.createElement(this.props.components.Actions,{actions:this.props.actions.filter((function(e){return"toolbarOnSelect"===e.position})),data:this.props.selectedRows,components:this.props.components}))}},{key:"renderActions",value:function(){var e=this.props.classes;return n.createElement("div",{className:e.actions},n.createElement("div",null,this.props.selectedRows&&this.props.selectedRows.length>0?this.renderSelectedActions():this.renderDefaultActions()))}},{key:"renderToolbarTitle",value:function(e){var t=this.props.classes,a="string"===typeof e?n.createElement(D.a,{variant:"h6",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e):e;return n.createElement("div",{className:t.title},a)}},{key:"render",value:function(){var e=this.props.classes,t=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization),o=this.props.showTextRowsSelected&&this.props.selectedRows&&this.props.selectedRows.length>0?t.nRowsSelected.replace("{0}",this.props.selectedRows.length):this.props.showTitle?this.props.title:null;return n.createElement(ae.a,{style:{marginTop:-9},className:ie()(e.root,Object($.a)({},e.highlight,this.props.showTextRowsSelected&&this.props.selectedRows&&this.props.selectedRows.length>0))},o&&this.renderToolbarTitle(o),"left"===this.props.searchFieldAlignment&&this.renderSearch(),"left"===this.props.toolbarButtonAlignment&&this.renderActions(),n.createElement("div",{className:e.spacer}),"right"===this.props.searchFieldAlignment&&this.renderSearch(),"right"===this.props.toolbarButtonAlignment&&this.renderActions())}}]),a}(n.Component);pe.defaultProps={actions:[],columns:[],columnsButton:!1,localization:{addRemoveColumns:"Add or remove columns",nRowsSelected:"{0} row(s) selected",showColumnsTitle:"Show Columns",showColumnsAriaLabel:"Show Columns",exportTitle:"Export",exportAriaLabel:"Export",exportName:"Export as CSV",searchTooltip:"Search",searchPlaceholder:"Search"},search:!0,showTitle:!0,showTextRowsSelected:!0,toolbarButtonAlignment:"right",searchAutoFocus:!1,searchFieldAlignment:"right",searchFieldVariant:"standard",selectedRows:[],title:"No Title!"};var ue=oe()((function(e){return{root:{paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(re.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 10%"},actions:{color:e.palette.text.secondary},title:{overflow:"hidden"},searchField:{minWidth:150,paddingLeft:e.spacing(2)},formControlLabel:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}}))(pe),de=a(410),he=a(133),me=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={sum:0},e.setSum=function(t){e.setState({sum:t})},e.formatMoney=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var o=e<0?"-":"",r=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),l=r.length>3?r.length%3:0;return o+(l?r.substr(0,l)+n:"")+r.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-r).toFixed(t).slice(2):"")}catch(i){console.log(i)}},e.handleFirstPageButtonClick=function(t){e.props.onChangePage(t,0)},e.handleBackButtonClick=function(t){e.props.onChangePage(t,e.props.page-1)},e.handleNextButtonClick=function(t){e.props.onChangePage(t,e.props.page+1)},e.handleNumberButtonClick=function(t){return function(a){e.props.onChangePage(a,t)}},e.handleLastPageButtonClick=function(t){e.props.onChangePage(t,Math.max(0,Math.ceil(e.props.count/e.props.rowsPerPage)-1))},e}return Object(s.a)(a,[{key:"renderPagesButton",value:function(e,t){for(var a=[],o=e;o<=t;o++){var r=o===this.props.page?"contained":"text";a.push(n.createElement(he.a,{size:"small",style:{boxShadow:"none",maxWidth:"30px",maxHeight:"30px",minWidth:"30px",minHeight:"30px"},disabled:o===this.props.page,variant:r,onClick:this.handleNumberButtonClick(o),key:o},o+1))}return n.createElement("span",null,a)}},{key:"render",value:function(){var e=this.props,t=e.classes,o=e.count,r=e.page,l=e.rowsPerPage,i=e.theme,s=e.showFirstLastPageButtons,c=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization),p=Math.ceil(o/l)-1,u=Math.max(r-1,0),d=Math.min(p,r+1);return n.createElement("div",null,n.createElement(ce.a,{className:t.root,style:{display:"flex",justifyContent:"center",position:"relative"}},n.createElement("div",{style:{}},s&&n.createElement(H.a,{title:c.firstTooltip},n.createElement("span",null,n.createElement(ee.a,{onClick:this.handleFirstPageButtonClick,disabled:0===r,"aria-label":c.firstAriaLabel},"rtl"===i.direction?n.createElement(this.props.icons.LastPage,null):n.createElement(this.props.icons.FirstPage,null)))),n.createElement(H.a,{title:c.previousTooltip},n.createElement("span",null,n.createElement(ee.a,{onClick:this.handleBackButtonClick,disabled:0===r,"aria-label":c.previousAriaLabel},n.createElement(this.props.icons.PreviousPage,null)))),n.createElement(de.a,{smDown:!0},this.renderPagesButton(u,d)),n.createElement(H.a,{title:c.nextTooltip},n.createElement("span",null,n.createElement(ee.a,{onClick:this.handleNextButtonClick,disabled:r>=p,"aria-label":c.nextAriaLabel},n.createElement(this.props.icons.NextPage,null)))),s&&n.createElement(H.a,{title:c.lastTooltip},n.createElement("span",null,n.createElement(ee.a,{onClick:this.handleLastPageButtonClick,disabled:r>=Math.ceil(o/l)-1,"aria-label":c.lastAriaLabel},"rtl"===i.direction?n.createElement(this.props.icons.FirstPage,null):n.createElement(this.props.icons.LastPage,null))))),n.createElement(D.a,{variant:"body2",style:{position:"absolute",right:"5%",marginTop:"12px",color:"#515151"}},"Total of filtered results: ",n.createElement("span",{style:{fontWeight:"700"}},"$ ",this.formatMoney(this.state.sum)))),n.createElement(D.a,{className:t.root,variant:"body2",style:{display:"flex",justifyContent:"center",position:"relative",color:"#515151"}},"Showing ",this.props.page*this.props.rowsPerPage+1," to ",this.props.count-(this.props.page+1)*this.props.rowsPerPage>0?(this.props.page+1)*this.props.rowsPerPage:this.props.count," of ",this.props.count," (",this.props.totalNumOfRows,")"))}}]),a}(n.Component);me.defaultProps={showFirstLastPageButtons:!0,localization:{firstTooltip:"First Page",previousTooltip:"Previous Page",nextTooltip:"Next Page",lastTooltip:"Last Page",labelDisplayedRows:"{from}-{to} of {count}",labelRowsPerPage:"Rows per page:"}};var ge=oe()((function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:e.spacing(2.5)}}}),{withTheme:!0})(me),fe=a(147),be=a(424),ye=a.n(be),Ee=a(402),ve=a(413),ke=a(191),Ce=function(e){return"medium"===function(e){return"default"===e.options.padding?"medium":"small"}(e)?48:32},we=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"renderHeader",value:function(){var e=this,t="default"===this.props.options.padding?"medium":"small";return this.props.columns.filter((function(e){return!e.hidden&&!(e.tableData.groupOrder>-1)})).sort((function(e,t){return e.tableData.columnOrder-t.tableData.columnOrder})).map((function(a,o){var r=a.title;return e.props.draggable&&(r=n.createElement(ke.Draggable,{key:a.tableData.id,draggableId:a.tableData.id.toString(),index:o},(function(e,t){return n.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),a.title)}))),!1!==a.sorting&&e.props.sorting&&(r=n.createElement(ve.a,{IconComponent:e.props.icons.SortArrow,active:e.props.orderBy===a.tableData.id,direction:e.props.orderDirection||"asc",onClick:function(){var t=a.tableData.id!==e.props.orderBy?"asc":"asc"===e.props.orderDirection?"desc":"desc"===e.props.orderDirection&&e.props.thirdSortClick?"":"desc"!==e.props.orderDirection||e.props.thirdSortClick?""===e.props.orderDirection?"asc":"desc":"asc";e.props.onOrderChange(a.tableData.id,t)}},r)),a.tooltip&&(r=n.createElement(H.a,{title:a.tooltip},n.createElement("span",null,r))),n.createElement(S.a,{key:a.tableData.id,align:-1!==["numeric"].indexOf(a.type)?"right":"left",className:e.props.classes.header,style:Object(v.a)(Object(v.a)(Object(v.a)({},e.props.headerStyle),a.headerStyle),{},{boxSizing:"border-box",width:a.tableData.width}),size:t},r)}))}},{key:"renderActionsHeader",value:function(){var e,t=Object(v.a)(Object(v.a)({},a.defaultProps.localization),this.props.localization),o=function(e){return e.actions.filter((function(e){return"row"===e.position||"function"===typeof e}))}(e=this.props).length*Ce(e);return n.createElement(S.a,{key:"key-actions-column",padding:"checkbox",className:this.props.classes.header,style:Object(v.a)(Object(v.a)({},this.props.headerStyle),{},{width:o,textAlign:"center",boxSizing:"border-box"})},n.createElement(ve.a,{disabled:!0},t.actions))}},{key:"renderSelectionHeader",value:function(){var e,t,a=this,o=(e=this.props,t=this.props.treeDataMaxLevel,Ce(e)+9*t);return n.createElement(S.a,{padding:"none",key:"key-selection-column",className:this.props.classes.header,style:Object(v.a)(Object(v.a)({},this.props.headerStyle),{},{width:o})},this.props.showSelectAllCheckbox&&n.createElement(M.a,{indeterminate:this.props.selectedCount>0&&this.props.selectedCount<this.props.dataCount,checked:this.props.dataCount>0&&this.props.selectedCount===this.props.dataCount,onChange:function(e,t){return a.props.onAllSelected&&a.props.onAllSelected(t)}}))}},{key:"renderDetailPanelColumnCell",value:function(){return n.createElement(S.a,{padding:"none",key:"key-detail-panel-column",className:this.props.classes.header,style:Object(v.a)({},this.props.headerStyle)})}},{key:"render",value:function(){var e=this,t=this.renderHeader();if(this.props.hasSelection&&t.splice(0,0,this.renderSelectionHeader()),this.props.showActionsColumn)if(this.props.actionsHeaderIndex>=0){var a=0;this.props.hasSelection&&(a=1),t.splice(this.props.actionsHeaderIndex+a,0,this.renderActionsHeader())}else-1===this.props.actionsHeaderIndex&&t.push(this.renderActionsHeader());return this.props.hasDetailPanel&&("right"===this.props.detailPanelColumnAlignment?t.push(this.renderDetailPanelColumnCell()):t.splice(0,0,this.renderDetailPanelColumnCell())),this.props.isTreeData>0&&t.splice(0,0,n.createElement(S.a,{padding:"none",key:"key-tree-data-header",className:this.props.classes.header,style:Object(v.a)({},this.props.headerStyle)})),this.props.columns.filter((function(e){return e.tableData.groupOrder>-1})).forEach((function(a){t.splice(0,0,n.createElement(S.a,{padding:"checkbox",key:"key-group-header"+a.tableData.id,className:e.props.classes.header}))})),n.createElement(Ee.a,null,n.createElement(F.a,null,t))}}]),a}(n.Component);we.defaultProps={dataCount:0,hasSelection:!1,headerStyle:{},selectedCount:0,sorting:!0,localization:{actions:"Actions"},orderBy:void 0,orderDirection:"asc",actionsHeaderIndex:0,detailPanelColumnAlignment:"left",draggable:!0,thirdSortClick:!0};var De=oe()((function(e){return{header:{position:"sticky",top:0,zIndex:10,backgroundColor:e.palette.background.paper}}}))(we),Oe=Object.values(f.columns),Pe=[],xe=0,Se=Object(fe.a)({palette:{primary:{main:"#931e1d;"},secondary:{main:"#931e1d;"}},typography:{color:"#515151",fontFamily:"Open Sans",fontSize:14,letterSpacing:-.3,width:66},overrides:{MuiTableCell:{root:{textAlign:"center",padding:10}},MuiInputBase:{input:{width:100}},MuiTableSortLabel:{icon:{opacity:.3}},MuiTableHead:{root:{borderWidth:0,borderTopWidth:2,borderBottomWidth:2,borderColor:"#931e1d",borderStyle:"solid"}}}}),Fe=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={columns:[],data:[],filterCountry:"",dateRange:null},e.toolbarRef=o.a.createRef(),e.tableRef=o.a.createRef(),e.paginationRef=o.a.createRef(),e.setData=function(){e.setState({data:e.props.data});var t=e.getLookupData(e.props.data);e.initLookup(t),e.loadImage()},e.loadImage=function(){Oe.map((function(e){"image"===e.type&&""!==e.lookup&&Object.keys(e.lookup).map((function(t){e.lookup[t]=o.a.createElement("img",{src:e.lookup[t],alt:t})}))})),e.setState({columns:Oe})},e.getLookupData=function(t){var a=Object.keys(t[0]),n=a.reduce((function(e,t){return e[t]={},e}),{});return e.props.data.map((function(e){a.map((function(t){var a=e[t];n[t][a]=a}))})),[n,a]},e.initLookup=function(e){var t=e[0];e[1].map((function(e){Oe.forEach((function(a){a.field!==e||""!==a.lookup||""!==a.type&&"numeric"!==a.type||(a.lookup=t[e])}))}))},e.filterCountry=function(t){Oe.forEach((function(e){"country"===e.field&&(e.tableData.filterValue=[t])})),e.setState({columns:Oe})},e.resetFilters=function(){Oe.forEach((function(e){e.tableData.filterValue=""})),console.log("reset click"),e.setState({columns:Oe}),e.props.handleResetMap(),e.toolbarRef.current.onSearchChange(""),e.setState({dateRange:null})},e.getFilteredData=function(){Pe=e.tableRef.current.state.data,console.log(e.tableRef.current.state.data);var t=Pe.reduce((function(e,t){return e+parseFloat(t.amount)}),0);console.log(t),e.paginationRef.current.setSum(t)},e.getNumOfRowsOnCurrentPage=function(e){xe=e},e.handleDateRange=function(t){e.setState({dateRange:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setData()}},{key:"componentDidUpdate",value:function(e){console.log("reset map: "+e.resetMap+"=> "+this.props.resetMap),console.log("country"+e.filterCountry+"=> "+this.props.filterCountry),e.filterCountry===this.props.filterCountry&&e.resetMap===this.props.resetMap||(console.log("update"),""!==this.props.filterCountry&&this.filterCountry(this.props.filterCountry))}},{key:"render",value:function(){var e=this;return o.a.createElement(ye.a,{theme:Se},o.a.createElement(C.a,{tableRef:this.tableRef,onSearchChange:this.getFilteredData,onFilterChange:this.getFilteredData,columns:this.state.columns,data:this.state.data,components:{FilterRow:function(t){return o.a.createElement(K,Object.assign({},t,{dateRange:e.state.dateRange,dateRangeChange:e.handleDateRange}))},Body:function(t){return o.a.createElement(q,Object.assign({},t,{resetFilters:e.resetFilters,getFilteredData:e.getFilteredData,getNumOfRowsOnPage:e.getNumOfRowsOnCurrentPage}))},Toolbar:function(t){return o.a.createElement("div",null,o.a.createElement(D.a,{variant:"",className:"explore"},f.table.textBody),o.a.createElement(ue,Object.assign({},t,{ref:e.toolbarRef})))},Pagination:function(t){return o.a.createElement(ge,Object.assign({},t,{ref:e.paginationRef,numOfRows:xe,totalNumOfRows:e.state.data.length}))},Header:function(e){return o.a.createElement(De,e)}},icons:{Search:function(){return o.a.createElement("div",null)}},localization:{toolbar:{searchPlaceholder:"Search the data\u2026"}},options:Object(v.a)(Object(v.a)({},f.table),{},{rowStyle:function(e,t){return t%2!==0||f.table.rowStyle.backgroundColor?Object(v.a)({},f.table.rowStyle):Object(v.a)(Object(v.a)({},f.table.rowStyle),{},{backgroundColor:"#e5e5e5"})}})}))}}]),a}(n.Component),Ae=(a(558),function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={ready:!1,data:{},filterCountry:"",resetMap:!1},e.handleCountryClick=function(t){e.setState({filterCountry:t,resetMap:!1})},e.handleResetMap=function(){e.setState({resetMap:!0,filterCountry:""})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(h.a)(f.csvUrl).then((function(t){return e.setState({data:t,ready:!0})}))}},{key:"render",value:function(){var e=null;return this.state.ready&&(e=o.a.createElement("div",null,o.a.createElement(E,{data:this.state.data,handleCountryClick:this.handleCountryClick,resetMap:this.state.resetMap}),o.a.createElement(Fe,{data:this.state.data,filterCountry:this.state.filterCountry,resetMap:this.state.resetMap,handleResetMap:this.handleResetMap}))),o.a.createElement("div",{className:"App"},e)}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[443,1,2]]]);
//# sourceMappingURL=main.175c3ad8.chunk.js.map